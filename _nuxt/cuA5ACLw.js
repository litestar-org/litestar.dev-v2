function e(e,t,n){return Math.min(Math.max(e,t),n)}function t(e){return typeof e==`number`&&!isNaN(e)}function n(n={}){let r,i=[],a,o=0,s=0,c=0,l=!1,u,d;function f(t){r=t;let n=r.selectedScrollSnap(),{scrollBody:o,containerRect:s,axis:c}=r.internalEngine();a=e(c.measureSize(s)*.75,200,500),l=!1,i=r.scrollSnapList().map((e,t)=>t===n?1:0),u=o.settled,d=r.scrollProgress,o.settled=E,r.scrollProgress=D,r.on(`select`,_).on(`slideFocus`,m).on(`pointerDown`,g).on(`pointerUp`,h),y(),m()}function p(){let{scrollBody:e}=r.internalEngine();e.settled=u,r.scrollProgress=d,r.off(`select`,_).off(`slideFocus`,m).off(`pointerDown`,g).off(`pointerUp`,h),r.slideNodes().forEach(e=>{let t=e.style;t.opacity=``,t.transform=``,t.pointerEvents=``,e.getAttribute(`style`)||e.removeAttribute(`style`)})}function m(){x(r.selectedScrollSnap(),1)}function h(){l=!1}function g(){l=!1,o=0,s=0}function _(){let e=r.internalEngine().scrollBody.duration();s=e?0:1,l=!0,e||m()}function v(e){let{axis:t}=r.internalEngine();return`translate${t.scroll.toUpperCase()}(${t.direction(e)}px)`}function y(){let{translate:e,slideLooper:t}=r.internalEngine();e.clear(),e.toggleActive(!1),t.loopPoints.forEach(({translate:e})=>{e.clear(),e.toggleActive(!1)})}function b(e){let{scrollSnaps:n,location:a,target:o}=r.internalEngine();!t(e)||i[e]<.5||(a.set(n[e]),o.set(a))}function x(t,n){r.scrollSnapList().forEach((a,o)=>{let s=Math.abs(n),c=i[o],u=o===t,d=e(u?c+s:c-s,0,1);i[o]=d;let f=u&&l,p=r.previousScrollSnap();f&&(i[p]=1-d),u&&C(t,d),S(o)})}function S(e){let t=r.internalEngine().slideRegistry[e],{scrollSnaps:n,containerRect:a}=r.internalEngine(),o=i[e];t.forEach(t=>{let i=r.slideNodes()[t].style,s=parseFloat(o.toFixed(2)),c=s>0,l=v(c?n[e]:a.width+2);c&&(i.transform=l),i.opacity=s.toString(),i.pointerEvents=o>.5?`auto`:`none`,c||(i.transform=l)})}function C(e,t){let{index:n,dragHandler:i,scrollSnaps:a}=r.internalEngine(),s=i.pointerDown(),l=1/(a.length-1),u=e,d=s?r.selectedScrollSnap():r.previousScrollSnap();if(s&&u===d){let e=Math.sign(o)*-1;u=d,d=n.clone().set(d).add(e).get()}c=d*l+(u-d)*l*t}function w(){let{dragHandler:e,index:t,scrollBody:n}=r.internalEngine(),i=r.selectedScrollSnap();if(!e.pointerDown())return i;let a=Math.sign(n.velocity()),s=Math.sign(o),c=t.clone().set(i).add(a*-1).get();return!a||!s?null:s===a?c:i}function T(e){let{dragHandler:n,scrollBody:r}=e.internalEngine(),c=n.pointerDown(),l=r.velocity(),u=r.duration(),d=w(),f=!t(d);if(c){if(!l)return;o+=l,s=Math.abs(l/a),b(d)}if(!c){if(!u||f)return;s+=(1-i[d])/u,s*=.68}f||x(d,s)}function E(){let{target:e,location:n}=r.internalEngine(),a=e.get()-n.get(),o=Math.abs(a)>=1,s=w(),c=!t(s);return T(r),c||o?!1:i[s]>.999}function D(){return c}return{name:`fade`,options:n,init:f,destroy:p}}n.globalOptions=void 0;export{n as default};