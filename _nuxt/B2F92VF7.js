const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BKRHbHYr.js","./BGCZxjyx.js","./entry.BB7bhZD-.css","./3pl4TF8n.js","./BhIa_EnD.js","./BT1GzcLN.js","./Dosn7Yjv.js","./BKdsuhRr.js"])))=>i.map(i=>d[i]);
import{Ar as e,Cn as t,En as n,Fn as r,Fr as i,Ln as a,Nn as o,Pn as s,Pr as c,Tn as l,Tr as u,Zt as d,er as f,fn as p,fr as m,gr as h,ir as g,qt as _,rr as v,vn as y,xn as b}from"#entry";import{n as x,t as S}from"./BKdsuhRr.js";import{r as C,t as w}from"./Dosn7Yjv.js";import{n as T,o as E}from"./BhIa_EnD.js";import{t as D}from"./3pl4TF8n.js";function O(e,t){return t.reduce((t,n)=>{let r=ee(e,n);return r!==void 0&&(t[n]=r),t},{})}function ee(e,t){return t.split(`.`).reduce((e,t)=>e&&e[t],e)}var k=`default`,A=/^@|^v-on:/,j=/^:|^v-bind:/,M=/^v-model/,N=[`select`,`textarea`,`input`],P=[`math`,`svg`],F=Object.fromEntries(`p.a.blockquote.code.pre.code.em.h1.h2.h3.h4.h5.h6.hr.img.ul.ol.li.strong.table.thead.tbody.td.th.tr.script`.split(`.`).map(e=>[e,`prose-${e}`])),I=[`script`,`base`],L=s({name:`MDCRenderer`,props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(n){let i=r()?.appContext?.app?.$nuxt,a=i?.$route||i?._route,{mdc:o}=i?.$config?.public||{},s=t(()=>({...o?.components?.prose&&n.prose!==!1?F:{},...o?.components?.map||{},...e(n.data?.mdc?.components||{}),...n.components})),c=t(()=>{let e=(n.body?.children||[]).map(e=>e.tag||e.type).filter(e=>!D.includes(e));return Array.from(new Set(e)).sort().join(`.`)}),l=u({...n.data});m(()=>n.data,e=>{Object.assign(l,e)}),await Q(n.body,{tags:s.value});function d(e,t){let n=e.split(`.`).length-1;return e.split(`.`).reduce((e,r,i)=>i==n&&e?(e[r]=t,e[r]):typeof e==`object`?e[r]:void 0,l)}return{tags:s,contentKey:c,route:a,runtimeData:l,updateRuntimeData:d}},render(e){let{tags:t,tag:n,body:r,data:i,contentKey:o,route:s,unwrap:c,runtimeData:l,updateRuntimeData:u}=e;if(!r)return null;let d={...i,tags:t,$route:s,runtimeData:l,updateRuntimeData:u},f=n===!1?void 0:K(n||d.component?.name||d.component||`div`);return f?a(f,{...d.component?.props,class:e.class,...this.$attrs,key:o},{default:p}):p?.();function p(){let e=z(r,a,{documentMeta:d,parentScope:d,resolveComponent:K});return e?.default?c?T(e.default(),typeof c==`string`?c.split(` `):[`*`]):e.default():null}}});function R(e,t,n,r){let{documentMeta:i,parentScope:a,resolveComponent:o}=n;if(e.type===`text`)return t(b,e.value);if(e.type===`comment`)return t(y,null,e.value);let s=e.tag,c=$(e,i.tags);if(e.tag===`binding`)return B(e,t,i,a);let l=X(c)?e=>e:o;if(I.includes(c))return t(`pre`,{class:`mdc-renderer-dangerous-tag`},`<`+c+`>`+E(e)+`</`+c+`>`);let u=l(c);typeof u==`object`&&(u.tag=s);let d=V(e,i);return r&&(d.key=r),t(u,d,z(e,t,{documentMeta:i,parentScope:{...a,...d},resolveComponent:l}))}function z(e,t,n){let{documentMeta:r,parentScope:i,resolveComponent:a}=n,o=(e.children||[]).reduce((e,t)=>{if(!Y(t))return e[k].children.push(t),e;let n=J(t);return e[n]=e[n]||{props:{},children:[]},t.type===`element`&&(e[n].props=t.props,e[n].children.push(...t.children||[])),e},{[k]:{props:{},children:[]}});return Object.entries(o).reduce((e,[n,{props:o,children:s}])=>(s.length&&(e[n]=(e={})=>{let n=O(e,Object.keys(o||{})),c=s.map((e,o)=>R(e,t,{documentMeta:r,parentScope:{...i,...n},resolveComponent:a},String(e.props?.key||o)));return o?.unwrap&&(c=T(c,o.unwrap)),Z(c)}),e),{})}function B(e,t,n,r={}){let i={...n.runtimeData,...r,$document:n,$doc:n},a=(e.props?.value.trim().split(/\.|\[(\d+)\]/).filter(Boolean)).reduce((e,t)=>{if(e&&t in e)return typeof e[t]==`function`?e[t]():e[t]},i),o=e.props?.defaultValue;return t(b,a??o??``)}function V(e,t){let{tag:n=``,props:r={}}=e;return Object.keys(r).reduce(function(e,i){if(i===`__ignoreMap`)return e;let a=r[i];if(M.test(i))return H(i,a,e,t,{native:N.includes(n)});if(i===`v-bind`)return U(i,a,e,t);if(A.test(i))return W(i,a,e,t);if(j.test(i))return G(i,a,e,t);let{attribute:o}=C(w,i);return Array.isArray(a)&&a.every(e=>typeof e==`string`)?(e[o]=a.join(` `),e):(e[o]=a,e)},{})}function H(e,t,n,r,{native:i}){let a=e.match(/^v-model:([^=]+)/)?.[1]||`modelValue`,o=i?`value`:a,s=i?`onInput`:`onUpdate:${a}`;return n[o]=q(t,r.runtimeData),n[s]=e=>{r.updateRuntimeData(t,i?e.target?.value:e)},n}function U(e,t,n,r){let i=q(t,r);return n=Object.assign(n,i),n}function W(e,t,n,r){return e=e.replace(A,``),n.on=n.on||{},n.on[e]=()=>q(t,r),n}function G(e,t,n,r){return e=e.replace(j,``),n[e]=q(t,r),n}var K=e=>{if(typeof e==`string`){if(D.includes(e))return e;let t=g(x(e),!1);return!e||t?.name===`AsyncComponentWrapper`||typeof t==`string`?t:`setup`in t?o(()=>new Promise(e=>e(t))):t}return e};function q(e,t){let n=e.split(`.`).reduce((e,t)=>typeof e==`object`?e[t]:void 0,t);return n===void 0?p(e):n}function J(e){let t=``;for(let n of Object.keys(e.props||{}))if(!(!n.startsWith(`#`)&&!n.startsWith(`v-slot:`))){t=n.split(/[:#]/,2)[1];break}return t||k}function Y(e){return e.tag===`template`}function X(e){return P.includes(e)}function Z(e){let t=[];for(let n of e){let e=t[t.length-1];n.type===b&&e?.type===b?e.children+=n.children:t.push(n)}return t}async function Q(e,t){if(!e)return;let n=Array.from(new Set(r(e,t)));await Promise.all(n.map(async e=>{if(e?.render||e?.ssrRender||e?.__ssrInlineRender)return;let t=K(e);t?.__asyncLoader&&!t.__asyncResolved&&await t.__asyncLoader()}));function r(e,t){let n=e.tag;if(e.type===`text`||n===`binding`||e.type===`comment`)return[];let i=$(e,t.tags);if(X(i))return[];let a=[];e.type!==`root`&&!D.includes(i)&&a.push(i);for(let n of e.children||[])a.push(...r(n,t));return a}}function $(e,t){let n=e.tag;return!n||e.props?.__ignoreMap!==void 0?n:t[n]||t[x(n)]||t[S(e.tag)]||n}var te=Object.assign(L,{__name:`MDCRenderer`}),ne={__name:`MDC`,props:{tag:{type:[String,Boolean],default:`div`},value:{type:[String,Object],required:!0},excerpt:{type:Boolean,default:!1},parserOptions:{type:Object,default:()=>({})},class:{type:[String,Array,Object],default:``},unwrap:{type:[Boolean,String],default:!1},cacheKey:{type:String,default:void 0},partial:{type:Boolean,default:!0}},async setup(e){let r,a,o=e,s=t(()=>o.cacheKey??b(o.value)),{data:u,refresh:p,error:g}=([r,a]=h(async()=>_(s.value,async()=>{if(typeof o.value!=`string`)return o.value;let{parseMarkdown:e}=await d(async()=>{let{parseMarkdown:e}=await import(`./BKRHbHYr.js`);return{parseMarkdown:e}},__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url);return await e(o.value,{...o.parserOptions,toc:o.partial?!1:o.parserOptions?.toc,contentHeading:o.partial?!1:o.parserOptions?.contentHeading})},`$xVLOXJeATB`)),r=await r,a(),r),y=t(()=>o.excerpt?u.value?.excerpt:u.value?.body);m(()=>o.value,()=>{p()});function b(e){typeof e!=`string`&&(e=JSON.stringify(e||``));let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<6)-t+r,t&=t}return`mdc-${t===0?`0000`:t.toString(36)}-key`}return(e,t)=>{let r=te;return v(e.$slots,`default`,{data:c(u)?.data,body:c(u)?.body,toc:c(u)?.toc,excerpt:c(u)?.excerpt,error:c(g)},()=>[y.value?(f(),l(r,{key:0,tag:o.tag,class:i(o.class),body:y.value,data:c(u)?.data,unwrap:o.unwrap},null,8,[`tag`,`class`,`body`,`data`,`unwrap`])):n(``,!0)])}}};export{ne as default};