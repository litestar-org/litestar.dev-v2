import{Cn as e,Kn as t,Pn as n,Qn as r,Tn as i,_r as a,ar as o,er as s,hn as c,mn as l,rr as u}from"#entry";import{a as d,c as f,i as p,o as m,r as h,s as g}from"./B2q3_cSu.js";function _(e){let t=new WeakMap,n=h();function r(r){if(e.mode!==`popLayout`)return;let i=r.element,a=i.offsetParent,o=a instanceof HTMLElement&&a.offsetWidth||0,s={height:i.offsetHeight||0,width:i.offsetWidth||0,top:i.offsetTop,left:i.offsetLeft,right:0};s.right=o-s.width-s.left;let c=e.anchorX===`left`?`left: ${s.left}`:`right: ${s.right}`;r.element.dataset.motionPopId=r.id;let l=document.createElement(`style`);n.value.nonce&&(l.nonce=n.value.nonce),t.set(r,l),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
    [data-motion-pop-id="${r.id}"] {
      position: absolute !important;
      width: ${s.width}px !important;
      height: ${s.height}px !important;
      top: ${s.top}px !important;
      ${c}px !important;
      }
      `)}function i(e){let n=t.get(e);n&&(t.delete(e),f.render(()=>{document.head.removeChild(n)}))}return{addPopStyle:r,removePopStyle:i,styles:t}}function v(e){return Promise.resolve().then(()=>{e()})}var y=n({name:`AnimatePresence`,inheritAttrs:!0,__name:`AnimatePresence`,props:{mode:{default:`sync`},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:`left`}},setup(n){let f=n;g(f);let{addPopStyle:h,removePopStyle:y,styles:b}=_(f);function x(e){let t=e;for(;t;){if(p.get(t))return t;t=t.firstElementChild}return null}function S(e){let t=p.get(e);t&&(y(t),t.isVShow=!0,m(e),v(()=>{t.setActive(`exit`,!1)}))}let C=new Map;r(()=>{C.clear()});function w(e,t){var n;let r=x(e),i=p.get(r);if(!r||!i){t(),C.size===0&&((n=f.onExitComplete)==null||n.call(f));return}C.set(r,!0),m(r),h(i);function a(e){var n;if(e?.detail?.isExit){if(i.visualElement.projection?.animationProgress>0&&!i.isSafeToRemove&&!i.isVShow)return;m(r),C.delete(r),C.size===0&&((n=f.onExitComplete)==null||n.call(f)),b.has(i)?y(i):i.willUpdate(`done`),t(),r.isConnected||i.unmount(!0)}}v(()=>{i.setActive(`exit`,!0),d.set(r,a),r.addEventListener(`motioncomplete`,a)})}let T=e(()=>f.mode===`wait`?{mode:f.mode===`wait`?`out-in`:void 0}:{tag:f.as});return(e,n)=>(s(),i(o(e.mode===`wait`?l:c),t({css:!1},T.value,{appear:``,onEnter:S,onLeave:w}),{default:a(()=>[u(e.$slots,`default`)]),_:3},16))}});export{y as t};